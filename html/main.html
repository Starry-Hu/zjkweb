<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>电力检测系统</title>
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../css/main.css">
    <link rel="stylesheet" type="text/css" href="../css/bootstrap-switch.css">
    <link href="../css/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" type="text/css" href="../css/magic-check.css">

    <style type="text/css">
        .move {
            width: 210px;
            position: absolute;
            left: 100px;
        }
        
        .XB {
            width: 100px;
        }
        
        .mycharts {
            width: 570px;
            height: 300px;
        }
        
        #list1 th,
        #list_2 th {
            text-align: center;
        }
        
        #move9,
        #flag9 {
            display: none;
        }
        
        #compare table {
            width: 90%!important;
            margin: 0 auto!important;
        }
        
        body,
        html {
            min-width: 1308px;
            overflow: auto;
        }
    </style>
</head>

<body>

    <div id="loading">
        <img src="../img/loading.gif">
    </div>
    <!-- <div class="col">
        <div class="opt">
            <input class="magic-radio" type="radio" name="radio" id="r1" value="amplitude" checked>
            <label for="r1">模值</label>
        </div>
        <div class="opt">
            <input class="magic-radio" type="radio" name="radio" id="r2" value="angle">
            <label for="r2">相角</label>
        </div>
    </div> -->

    <!-- 自动刷新or查找某时刻的信息 -->
    <!-- <div id="switch">
        <div class="switch">
            <input type="checkbox" data-on-text="手动选择" data-off-text="自动刷新" checked />
        </div>
        <div class="container" style="width: 650px;display: none;" id="container1">
            <form action="" class="form-horizontal" role="form">
                <div class="form-group">
                    <div class="input-group date form_datetime col-md-5" data-date="2018-09-01T05:25:00" data-date-format="dd MM yyyy - HH:ii p" data-link-field="dtp_input1" id="datetime1">
                        <input class="form-control" size="16" type="text" value="" readonly placeholder="请手动选择日期" id="form-control1">
                        <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                        <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
                    </div>
                    <input type="hidden" id="dtp_input1" value="" />
                </div>
            </form>
            <button class="btn btn-sm btn-primary" id="up_hour" style="margin-left: -14px;margin-top: -10px;">上一小时</button>
            <button class="btn btn-sm btn-primary" id="down_hour" style="margin-top: -10px;">下一小时</button> -->

    <!-- 加上六个按钮，对一小时内的六个段点击查询 -->
    <!-- <div class="m-style M-box">
                <span class="active">1</span>
                <a href="javascript:;" data-page="2">2</a>
                <a href="javascript:;" data-page="3">3</a>
                <a href="javascript:;" data-page="4">4</a>
                <a href="javascript:;" data-page="5">5</a>
                <a href="javascript:;" data-page="6">6</a>
            </div>
        </div>

        <button class="btn btn-lg btn-warning" id="getWarning">异常列表</button>
        <button class="btn btn-lg btn-danger" id="alarm">异常报警</button> -->

    <!--  在底图上设置动态的覆盖图层进行显示 -->
    <!-- <div class="pic" id="content">
            <div class="flag" order="1" id="flag1"></div>
            <div class="flag" order="2" id="flag2"></div>
            <div class="flag" order="6" id="flag6"></div>
            <div class="flag" order="8" id="flag8"></div>
            <div class="flag" order="9" id="flag9"></div>
            <div class="flag" order="10" id="flag10"></div>
            <div class="flag" order="11" id="flag11"></div> -->
    <!-- 升压站浮层 -->
    <!-- 
            <div class="box box_v" order="2" id="box1_2"></div>
            <div class="box box_h" order="3" id="box1_3"></div>
            <div class="box box_h" order="4" id="box2_3"></div>
            <div class="box box_v" order="5" id="box2_4"></div>
            <div class="box box_h" order="7" id="box3_5"></div>
            <div class="box box_h" order="9" id="box3_13"></div>
            <div class="box box_h" order="10" id="box4_6"></div>
            <div class="box box_v" order="11" id="box4_7"></div>
            <div class="box box_h" order="13" id="box5_8"></div>
            <div class="box box_v" order="14" id="box5_9"></div>
            <div class="box box_h" order="19" id="box7_13"></div>
            <div class="box box_v" order="20" id="box7_14"></div>
            <div class="box box_h" order="23" id="box8_15"></div>
            <div class="box box_v" order="24" id="box8_16"></div> -->

    <!-- 删除了“介” “钠”的显示 -->
    <!-- <div class="I_history" id="I_history2" order="2">I</div>
            <div class="I_history" id="I_history3" order="3">I</div>
            <div class="I_history" id="I_history4" order="4">I</div>
            <div class="I_history" id="I_history5" order="5">I</div>
            <div class="I_history" id="I_history6" order="6">I</div>
            <div class="I_history" id="I_history7" order="7">I</div>
            <div class="I_history" id="I_history8" order="8">I</div>
            <div class="I_history" id="I_history9" order="9">I</div>
            <div class="I_history" id="I_history13" order="13">I</div>
            <div class="I_history" id="I_history14" order="14">I</div>
            <div class="I_history" id="I_history15" order="15">I</div>
            <div class="I_history" id="I_history16" order="16">I</div>
            <div id="station"></div> -->
    <!-- 升压站底图，由于升压站是新增的，因此不在大的底图上 -->
    <!-- </div> -->

    <!-- 右侧弹窗列表显示 -->
    <!-- <div id="compare" style="height: 100%;width: 400px;float: right;border-left: 2px solid #8e8e8e; position: fixed;right: -400px;top: 0;overflow: auto;">
            <div style="width: 90%;margin: 0 auto;">
                <button class="btn btn-lg btn-primary" id="clear" type="button" onclick="clearcontent()">清空</button>
                <button class="btn btn-lg btn-danger" id="off" onclick="disappear()">关闭</button>
            </div>
        </div> -->

    <!-- <div class="modal" id="mymodal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title">提示</h4>
                    </div>
                    <div class="modal-body">
                        <p>右侧列表已满，请将右侧列表清除后再试</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    </div>
                </div>
            </div>
        </div> -->
    <!-- 删除了黄色的异常列表 -->

    <!-- 点击异常报警后的弹出框 -->
    <div class="modal" id="warningList" tabindex="-1">
        <div class="modal-dialog" style="width:800px">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title"></h4>
                </div>
                <div class="modal-body">
                    <div id="list" style="height: 500px;width: 100%;overflow: auto;"></div>
                </div>
                <div class="modal-footer">
                    <form role="form">
                        <div class="form-group" style="width: 300px;float: left;margin-right:50px;">
                            <input type="text" class="form-control" placeholder="请输入设备号" id="deviceNum">
                        </div>

                        <div class="container" style="width: 600px;float: left;" id="container2">
                            <form action="" class="form-horizontal" role="form">

                                <div class="form-group">
                                    <div class="input-group date form_datetime col-md-5" data-date-format="dd MM yyyy - HH:ii" data-link-field="dtp_input_1" id="datetime2">
                                        <input class="form-control" size="16" type="text" value="" readonly placeholder="请手动选择日期" id="form-control2">
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
                                    </div>
                                    <input type="hidden" id="dtp_input_1" value="" /><br/>
                                </div>
                            </form>
                        </div>
                    </form>
                    <button type="button" class="btn btn-primary" id="search">按条件查询</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->

    <!-- 点击异常报警后的弹出框2:显示相角的情况 -->
    <div class="modal" id="warningList_2" tabindex="-1">
        <div class="modal-dialog" style="width:1000px">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title">异常报警</h4>
                </div>
                <div class="modal-body">
                    <div id="list_2" style="height: 500px;width: 100%;overflow: auto;"></div>
                </div>
                <div class="modal-footer">
                    <form role="form" style="display: flex;justify-content:space-between; width: 100%;">
                        <div class="form-group">
                            <!-- onmousedown="if(this.options.length>4){this.size=5}" onblur="this.size=1" onchange="this.size=1" id="deviceIDs" -->
                            <select class="form-control" id="deviceIDs">
							<option value="">请选择设备号</option>
				            <option value="23">箱变一</option> 
				            <option value="26">箱变二</option> 
				            <option value="24">箱变八</option> 
				            <option value="25">箱变十</option> 
				            <option value="21">箱变六</option> 
				            <option value="1">分支箱一2号线</option>  
				            <option value="2">分支箱一3号线</option>  
				            <option value="4">分支箱二3号线</option>  
				            <option value="3">分支箱二4号线</option>  
				            <option value="14">分支箱三5号线</option>  
				            <option value="13">分支箱三13号线</option>  
				            <option value="6">分支箱四6号线</option>  
				            <option value="5">分支箱四7号线</option>  
				            <option value="8">分支箱五8号线</option>  
				            <option value="7">分支箱五9号线</option>  
				            <option value="10">分支箱七13号线</option>  
				            <option value="9">分支箱七14号线</option>  
				            <option value="12">分支箱八15号线</option>  
				            <option value="11">分支箱八16号线</option>  
						</select>
                        </div>
                        <div class="container" style="width: 600px;" id="container_2">
                            <form action="" class="form-horizontal" role="form">

                                <div class="form-group">
                                    <div class="input-group date form_datetime col-md-5" data-date-format="dd MM yyyy - HH:ii p" data-link-field="dtp_input_2" id="datetime_2">
                                        <input class="form-control" size="16" type="text" value="" readonly placeholder="请手动选择日期" id="form-control_2">
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
                                    </div>
                                    <input type="hidden" id="dtp_input_2" value="" /><br/>
                                </div>
                            </form>
                        </div>
                    </form>
                    <button type="button" class="btn btn-primary" id="search_2">按条件查询</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->



    <div class="modal" id="line_loss_chart" tabindex="-1">
        <div class="modal-dialog" style="width:1200px">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title">历史信息</h4>
                </div>
                <div class="modal-body">
                    <div id="line_loss_pic" style="width: 1150px;height:600px;"></div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->


    <!-- 四个能够弹出地异常列表 -->
    <div class="modal" id='show1' data-backdrop="static" style="width: 600px;height: 450px;">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel"></h4>
                </div>
                <div class="modal-body">
                    <div class="mycharts" id="charts1"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id='show2' data-backdrop="static" style="width: 600px;height: 450px;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel"></h4>
                </div>
                <div class="modal-body">
                    <div class="mycharts" id="charts2"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id='show3' data-backdrop="static" style="width: 600px;height: 450px;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel"></h4>
                </div>
                <div class="modal-body">
                    <div class="mycharts" id="charts3"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id='show4' data-backdrop="static" style="width: 600px;height: 450px;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel"></h4>
                </div>
                <div class="modal-body">
                    <div class="mycharts" id="charts4"></div>
                </div>
            </div>
        </div>
    </div>
</body>

<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
<script type="text/javascript" src="../js/bootstrap-switch.min.js"></script>
<script type="text/javascript" src="../js/bootstrap-datetimepicker.js"></script>
<script type="text/javascript" src="../js/modal.js"></script>
<script type="text/javascript" src="../js/url.js"></script>
<script type="text/javascript" src="../js/api.js"></script>
<script type="text/javascript" src="../js/echarts.js"></script>
<script type="text/javascript" src="../js/jquery.pagination.js"></script>

<script type="text/javascript">
    function getNow(s) {
        return s < 10 ? '0' + s : s;
    }
    var myDate = new Date();
    var year = myDate.getFullYear(); //获取当前年
    var month = myDate.getMonth() + 1; //获取当前月
    var date = myDate.getDate(); //获取当前日
    var h = myDate.getHours(); //获取当前小时数(0-23)
    var m = myDate.getMinutes(); //获取当前分钟数(0-59)
    var s = myDate.getSeconds();
    var now = year + '-' + getNow(month) + "-" + getNow(date) + " " + getNow(h) + ':' + getNow(m) + ":" + getNow(s);

    $("#datetime1").attr("data-date", now);
    $("#datetime2").attr("data-date", now);
    $("#form-control_2").attr("data-date", year + '-' + getNow(month) + "-" + getNow(date));

    function clearcontent() {
        count = 0;
        $("#compare").html("");
        $("#compare").html("<div style=\"width: 90%;margin: 0 auto;\">" + "<button class=\"btn btn-lg btn-primary\" id=\"clear\" onclick=\"clearcontent()\">清空</button>" +
            "<button  class=\"btn btn-lg btn-danger\" id=\"off\" onclick=\"disappear()\">关闭</button>" + "</div>");
    }

    function disappear() {
        $("#compare").animate({
            right: "-400px"
        });
    }

    $('.form_datetime').datetimepicker({
        language: 'en',
        weekStart: 1,
        todayBtn: 1,
        autoclose: 1,
        todayHighlight: 1,
        minView: 1,
        startView: 2,
        forceParse: 0,
        format: 'yyyy-mm-dd hh:00',
    });
</script>
<script type="text/javascript" src="../js/main.js"></script>
<script type="text/javascript" src="../js/adjust.js"></script>
<script type="text/javascript">
    $(function() {
        setInterval(function() {
            if ($(window).width() < 1430) {
                $(".bootstrap-switch .bootstrap-switch-handle-on").css("white-space", "pre-wrap");
                $(".bootstrap-switch .bootstrap-switch-handle-off").css("white-space", "pre-wrap");
                $(".bootstrap-switch .bootstrap-switch-label").css("white-space", "pre-wrap");
            } else {
                $(".bootstrap-switch .bootstrap-switch-handle-on").css("white-space", "nowrap");
                $(".bootstrap-switch .bootstrap-switch-handle-off").css("white-space", "nowrap");
                $(".bootstrap-switch .bootstrap-switch-label").css("white-space", "nowrap");
            }
        }, 200);

        $("#up_hour").click(function() {

            if ($('#form-control1').val() == "") {
                var myDate = new Date();
                var year = myDate.getFullYear(); //获取当前年
                var month = myDate.getMonth() + 1; //获取当前月
                var date = myDate.getDate(); //获取当前日
                var h = myDate.getHours() - 1; //获取当前小时数(0-23)
                tmp = year + '-' + getNow(month) + "-" + getNow(date) + " " + getNow(h) + ":00";

            } else {
                var str = $('#form-control1').val();
                var aPos = str.indexOf(' ');
                var bPos = str.indexOf(':');
                var r = str.substr(aPos + 1, bPos - aPos - 1);
                var h = parseInt(r) - 1;
                tmp = $('#form-control1').val().substr(0, aPos) + " " + getNow(h) + ":00";
            }
            $('#form-control1').val(tmp);
            window.time = tmp;
            setTimeout(function() {
                Refresh(window.time, amplitudeOrAngle);
            }, 100)
        })

        $("#down_hour").click(function() {

            var tmp;

            if ($('#form-control1').val() == "") {
                var myDate = new Date();
                var year = myDate.getFullYear(); //获取当前年
                var month = myDate.getMonth() + 1; //获取当前月
                var date = myDate.getDate(); //获取当前日
                var h = myDate.getHours() + 1; //获取当前小时数(0-23)
                tmp = year + '-' + getNow(month) + "-" + getNow(date) + " " + getNow(h) + ":00";
            } else {
                var str = $('#form-control1').val();
                var aPos = str.indexOf(' ');
                var bPos = str.indexOf(':');
                var r = str.substr(aPos + 1, bPos - aPos - 1);
                var h = parseInt(r) + 1;
                tmp = $('#form-control1').val().substr(0, aPos) + " " + getNow(h) + ":00";
            }
            $('#form-control1').val(tmp);
            window.time = tmp;
            setTimeout(function() {
                Refresh(window.time, amplitudeOrAngle);
            }, 100)
        })
    })
</script>

</html>